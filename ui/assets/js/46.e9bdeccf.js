(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{591:function(t,v,_){"use strict";_.r(v);var r=_(3),a=Object(r.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("ul",[_("li",[_("a",{attrs:{href:"#introduce"}},[t._v("Introduce")])]),t._v(" "),_("li",[_("a",{attrs:{href:"#props"}},[t._v("Props")])]),t._v(" "),_("li",[_("a",{attrs:{href:"#events"}},[t._v("Events")])]),t._v(" "),_("li",[_("a",{attrs:{href:"#methods"}},[t._v("Methods")])]),t._v(" "),_("li",[_("a",{attrs:{href:"#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E9%80%82%E9%85%8D"}},[t._v("服务端适配")])])]),t._v(" "),_("h2",{attrs:{id:"introduce"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#introduce"}},[t._v("#")]),t._v(" Introduce")]),t._v(" "),_("blockquote",[_("p",[_("code",[t._v("ui-image-uploader")]),t._v(" 组件需要手动引入; 可以对图片类型的文件进行上传, 并进行本地压缩/裁剪等")])]),t._v(" "),_("div",{staticClass:"language-js extra-class"},[_("pre",{pre:!0,attrs:{class:"language-js"}},[_("code",[_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" ui "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@bpui/ui'")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nVue"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("component")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ui-image-uploader'")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ui"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("UIImageUploader"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nVue"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("component")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ui-image-crop-preview'")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ui"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("UIImageCropPreview"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),_("div",{staticClass:"language-html extra-class"},[_("pre",{pre:!0,attrs:{class:"language-html"}},[_("code",[_("span",{pre:!0,attrs:{class:"token tag"}},[_("span",{pre:!0,attrs:{class:"token tag"}},[_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ui-image-uploader")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("serverUrl")]),_("span",{pre:!0,attrs:{class:"token attr-value"}},[_("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://127.0.0.1:8080/upload"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),_("ui-image-uploader",{attrs:{serverUrl:"http://127.0.0.1:8080/upload"}}),t._v(" "),_("ul",[_("li",[t._v("可以上传图片")]),t._v(" "),_("li",[t._v("选择图片后, 会出现裁剪缩放操作页面; 会在本地进行裁剪操作")]),t._v(" "),_("li",[t._v("有上传进度, 可以取消")]),t._v(" "),_("li",[t._v("裁剪页面在手机端和桌面端的样式独立")])]),t._v(" "),_("h2",{attrs:{id:"props"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#props"}},[t._v("#")]),t._v(" Props")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("名称")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("描述")]),t._v(" "),_("th",[t._v("默认")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("coverUrl")]),t._v(" "),_("td",[t._v("string")]),t._v(" "),_("td",[t._v("初始状态时显示的封面图片")]),t._v(" "),_("td",[t._v("-")])]),t._v(" "),_("tr",[_("td",[t._v("serverUrl")]),t._v(" "),_("td",[t._v("string")]),t._v(" "),_("td",[t._v("上传服务器的地址")]),t._v(" "),_("td",[t._v("-")])]),t._v(" "),_("tr",[_("td",[t._v("data")]),t._v(" "),_("td",[t._v("string")]),t._v(" "),_("td",[t._v("需要上传到服务端的字符串.")]),t._v(" "),_("td",[t._v("-")])]),t._v(" "),_("tr",[_("td",[t._v("maxFileSize")]),t._v(" "),_("td",[t._v("number")]),t._v(" "),_("td",[t._v("允许上传的最大文件.0表示无限制.")]),t._v(" "),_("td",[t._v("0")])]),t._v(" "),_("tr",[_("td",[t._v("timeout")]),t._v(" "),_("td",[t._v("number")]),t._v(" "),_("td",[t._v("上传超时 (ms)")]),t._v(" "),_("td",[t._v("10000")])]),t._v(" "),_("tr",[_("td",[t._v("disabled")]),t._v(" "),_("td",[t._v("boolean")]),t._v(" "),_("td",[t._v("是否禁用")]),t._v(" "),_("td",[t._v("false")])]),t._v(" "),_("tr",[_("td",[t._v("httpHeaders")]),t._v(" "),_("td",[t._v("any")]),t._v(" "),_("td",[t._v("上传时的请求headers对象")]),t._v(" "),_("td",[t._v("-")])]),t._v(" "),_("tr",[_("td",[t._v("crossDomain")]),t._v(" "),_("td",[t._v("boolean")]),t._v(" "),_("td",[t._v("是否支持跨域")]),t._v(" "),_("td",[t._v("true")])]),t._v(" "),_("tr",[_("td",[t._v("withCredentials")]),t._v(" "),_("td",[t._v("boolean")]),t._v(" "),_("td",[t._v("是否附带cookie")]),t._v(" "),_("td",[t._v("true")])]),t._v(" "),_("tr",[_("td",[t._v("tip")]),t._v(" "),_("td",[t._v("string")]),t._v(" "),_("td",[t._v("提示文字")]),t._v(" "),_("td",[t._v("'将图片拖到此处,或点击上传'")])]),t._v(" "),_("tr",[_("td",[t._v("tipCancel")]),t._v(" "),_("td",[t._v("string")]),t._v(" "),_("td",[t._v("提示文字")]),t._v(" "),_("td",[t._v("'点击取消'")])]),t._v(" "),_("tr",[_("td",[t._v("enableDragFile")]),t._v(" "),_("td",[t._v("boolean")]),t._v(" "),_("td",[t._v("打开拖拽文件特性")]),t._v(" "),_("td",[t._v("true")])]),t._v(" "),_("tr",[_("td",[t._v("textErrFileNotFound")]),t._v(" "),_("td",[t._v("string")]),t._v(" "),_("td",[t._v("错误提示: 找不到文件")]),t._v(" "),_("td",[t._v("'未选择文件!'")])]),t._v(" "),_("tr",[_("td",[t._v("textErrFileSizeExceed")]),t._v(" "),_("td",[t._v("string")]),t._v(" "),_("td",[t._v("错误提示: 选择的文件大小超过最大值")]),t._v(" "),_("td",[t._v("'选择的文件大小超出最大值!'")])]),t._v(" "),_("tr",[_("td",[t._v("textErrFileHashError")]),t._v(" "),_("td",[t._v("string")]),t._v(" "),_("td",[t._v("错误提示: 文件读取错误")]),t._v(" "),_("td",[t._v("'计算文件哈希值时发生错误,请重新选择文件!'")])]),t._v(" "),_("tr",[_("td",[t._v("textErrNetError")]),t._v(" "),_("td",[t._v("string")]),t._v(" "),_("td",[t._v("错误提示: 网络错误")]),t._v(" "),_("td",[t._v("'网络错误,请稍后重试!'")])])])]),t._v(" "),_("h2",{attrs:{id:"events"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#events"}},[t._v("#")]),t._v(" Events")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("名称")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("描述")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("uploadSuccess")]),t._v(" "),_("td",[t._v("(responseData:any)=>void")]),t._v(" "),_("td",[t._v("上传成功返回响应数据")])]),t._v(" "),_("tr",[_("td",[t._v("uploadProgress")]),t._v(" "),_("td",[t._v("(percent:number)=>void")]),t._v(" "),_("td",[t._v("上传进度; percent为0~1")])]),t._v(" "),_("tr",[_("td",[t._v("uploadError")]),t._v(" "),_("td",[t._v("(err:any)=>void")]),t._v(" "),_("td",[t._v("上传出错; "),_("code",[t._v("err")]),t._v("为:"),_("br"),t._v("- FILE_NOT_FOUND"),_("br"),t._v("- FILE_SIZE_EXCEED"),_("br"),t._v("- FILE_HASH_ERROR"),_("br"),t._v("- NET_ERROR"),_("br"),t._v("- 其他")])])])]),t._v(" "),_("blockquote",[_("p",[t._v("错误信息")])]),t._v(" "),_("p",[t._v("当上传发生错误时, err会等于下列值:")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("错误信息")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("FILE_NOT_FOUND:"),_("code",[t._v("string")])]),t._v(" "),_("td",[t._v("未选择文件")])]),t._v(" "),_("tr",[_("td",[t._v("FILE_SIZE_EXCEED:"),_("code",[t._v("string")])]),t._v(" "),_("td",[t._v("选择的文件大小超出允许的大小值")])]),t._v(" "),_("tr",[_("td",[t._v("FILE_HASH_ERROR:"),_("code",[t._v("string")])]),t._v(" "),_("td",[t._v("验算文件hash值时出错")])]),t._v(" "),_("tr",[_("td",[t._v("NET_ERROR:"),_("code",[t._v("string")])]),t._v(" "),_("td",[t._v("网络错误")])]),t._v(" "),_("tr",[_("td",[t._v("e:"),_("code",[t._v("Error")])]),t._v(" "),_("td",[t._v("任意的错误对象表明其他错误")])])])]),t._v(" "),_("h2",{attrs:{id:"methods"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#methods"}},[t._v("#")]),t._v(" Methods")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("名称")]),t._v(" "),_("th",[t._v("描述")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("reset():void")]),t._v(" "),_("td",[t._v("重置上传组件")])]),t._v(" "),_("tr",[_("td",[t._v("browseFile():void")]),t._v(" "),_("td",[t._v("浏览文件")])])])]),t._v(" "),_("h2",{attrs:{id:"服务端适配"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#服务端适配"}},[t._v("#")]),t._v(" 服务端适配")]),t._v(" "),_("p",[t._v("客户端会按照如下规范进行请求:")]),t._v(" "),_("ul",[_("li",[_("code",[t._v("multipart/form-data")]),t._v(" 格式上传;")]),t._v(" "),_("li",[_("code",[t._v("POST")]),t._v(" 方法")]),t._v(" "),_("li",[t._v("会在请求url后添加 ?"),_("code",[t._v("crc32")]),t._v("=xxx&"),_("code",[t._v("size")]),t._v("=xxx 两个查询参数;\n"),_("ul",[_("li",[t._v("size: 文件总字节大小")]),t._v(" "),_("li",[t._v("crc32: 文件hash值")])])]),t._v(" "),_("li",[t._v("会将data字符串字段添加到url查询参数中 ?"),_("code",[t._v("data")]),t._v("=xxx;")])]),t._v(" "),_("p",[t._v("服务端响应:")]),t._v(" "),_("ul",[_("li",[t._v("响应内容需为"),_("code",[t._v("json")]),t._v("格式")])])],1)}),[],!1,null,null,null);v.default=a.exports}}]);